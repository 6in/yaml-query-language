---
layout: default
title: Yql Use Cases Overview
---

# YQL利用用途の全体像

## 概要

YQLの利用用途が広がってきています。本ドキュメントでは、現在議論されているYQLの利用用途を整理し、それぞれの価値と実装方針をまとめます。

## YQLの利用用途マップ

```
┌─────────────────────────────────────────────────────────────────┐
│                    YQLの利用用途                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  1. クエリ言語としてのYQL                                        │
│     ├─ 開発時: SQL→YQL変換（既存SQLの移行）                      │
│     ├─ 開発時: スキーマ定義駆動のYQL生成（新規生成）             │
│     └─ 実行時: YQL→SQL変換（リアルタイム実行）                  │
│                                                                  │
│  2. AI解析の前処理としてのYQL                                   │
│     ├─ SQL→YQL変換してから解析（構造化による理解の向上）        │
│     └─ スキーマ情報付与YQL（包括的な解析ドキュメント）          │
│                                                                  │
│  3. ドキュメントとしてのYQL                                     │
│     ├─ 実行可能ドキュメント（コード自体が仕様書）               │
│     └─ AI知識ベース（Gem/NotebookLM等への格納）                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## 利用用途の詳細

### 1. クエリ言語としてのYQL

#### 1.1 SQL→YQL変換（既存SQLの移行）

**目的**: 既存のSQLをYQLに変換して、YQLベースの開発に移行する

**アプローチ**:
```
SQL + specs/select.md → [AI] → YQL
```

**価値**:
- 既存のSQL資産をYQLに移行可能
- データベース方言の違いを抽象化
- 可読性と保守性の向上

**実装**:
- AIを利用した変換（パーサー不要）
- `specs/select.md`をガイドラインとして使用
- GeminiのGemやNotebookLMに`specs/select.md`を格納

**ステータス**: ✅ 検証済み（validation/001.sql - 020.sql）

---

#### 1.2 スキーマ定義駆動のYQL生成（新規生成）

**目的**: スキーマ定義を参照して、新規にYQLを生成する

**アプローチ**:
```
スキーマ定義 + 自然言語要件 + specs/select.md → [AI] → YQL
```

**価値**:
- スキーマ情報を理解した上で正確なYQLを生成
- 存在しないテーブル・カラムを参照するエラーを防止
- 型情報、制約、リレーションシップを考慮したYQL生成

**実装**:
- スキーマ定義（`schemas/*.yql`）をAIに渡す
- 自然言語で要件を伝える
- AIがスキーマ定義を参照しながらYQLを生成

**ステータス**: 📝 提案段階

---

#### 1.3 YQL→SQL変換（リアルタイム実行）

**目的**: YQLをリアルタイムでSQLに変換して実行する

**アプローチ**:
```
YQL → [YQLパーサー] → AST → [SQLジェネレーター] → SQL
```

**価値**:
- データベース方言の違いを抽象化
- 一貫性のあるSQL生成
- 高速な変換（リアルタイム実行）

**実装**:
- YQLパーサー: YAMLを解析してASTを生成
- SQLジェネレーター: ASTを各DB方言のSQLに変換
- `specs/select.md`を実装の仕様書として参照

**ステータス**: 📝 実装予定

---

### 2. AI解析の前処理としてのYQL

#### 2.1 SQL→YQL変換してから解析

**目的**: SQLを解析する前にYQLに変換することで、AIの理解を向上させる

**アプローチ**:
```
SQL → [YQL変換] → YQL → [AI解析] → 結果
```

**価値**:
- 構造化された形式により、AIの理解が容易
- 一貫性の向上（エイリアス必須、各句が明確に分離）
- 処理ステップの削減（関連付け処理が不要）

**実装**:
- SQL→YQL変換を前処理として実行
- 変換されたYQLをAIに渡して解析

**ステータス**: 📝 提案段階

---

#### 2.2 スキーマ情報付与YQL（包括的な解析ドキュメント）

**目的**: SQL→YQL変換時にスキーマ情報を付与して、AI解析の精度を向上させる

**アプローチ**:
```
SQL → [YQL変換] → YQL + スキーマ情報 → [AI解析] → 結果
```

**価値**:
- スキーマ情報（型、制約、リレーションシップ）を参照可能
- より正確な解析（型チェック、依存関係の把握）
- 最適化提案（インデックス情報から）

**実装**:
- SQL→YQL変換時に、使用されているテーブルのスキーマ情報を付与
- スキーマ定義（`schemas/*.yql`）から該当テーブルの定義を抽出

**ステータス**: 📝 提案段階（例: validation/004.sql.yql.enriched）

---

### 3. ドキュメントとしてのYQL

#### 3.1 実行可能ドキュメント

**目的**: YQLコード自体が要件定義書・仕様書として機能する

**価値**:
- コードとドキュメントの同期が不要
- 実行可能な仕様書
- 可読性の向上（YAML形式）

**ステータス**: ✅ 既存の価値提案

---

#### 3.2 AI知識ベース

**目的**: YQLの仕様書やスキーマ定義をAI知識ベースに格納して、開発支援に活用

**アプローチ**:
```
specs/select.md + schemas/*.yql → [AI知識ベース] → 開発支援
```

**価値**:
- 常に最新の仕様を参照
- SQL→YQL変換、YQL生成の支援
- 一貫性のある変換

**実装**:
- GeminiのGem、NotebookLM等に`specs/select.md`と`schemas/*.yql`を格納
- プロンプトで仕様書を参照して変換・生成を実行

**ステータス**: 📝 提案段階

---

## 用途間の関係性

```
┌─────────────────────────────────────────────────────────────┐
│              用途間の関係性                                  │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  開発時:                                                     │
│    SQL → [AI変換] → YQL                                      │
│    または                                                     │
│    スキーマ定義 + 要件 → [AI生成] → YQL                      │
│                                                              │
│  実行時:                                                     │
│    YQL → [パーサー] → SQL → [実行]                          │
│                                                              │
│  AI解析:                                                     │
│    SQL → [YQL変換] → YQL + スキーマ情報 → [AI解析]         │
│                                                              │
│  知識ベース:                                                 │
│    specs/select.md + schemas/*.yql → [AI知識ベース]        │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```

## 実装の優先順位

### Phase 1: 基本機能（クエリ言語としてのYQL）
1. ✅ SQL→YQL変換（AI利用）
2. 📝 スキーマ定義駆動のYQL生成
3. 📝 YQL→SQL変換（パーサー＆ジェネレーター）

**目的**: YQLをクエリ言語として機能させる

### Phase 2: AI解析支援
1. 📝 SQL→YQL変換してから解析
2. 📝 スキーマ情報付与YQL

**目的**: AI解析の精度向上

### Phase 3: 知識ベース統合
1. 📝 AI知識ベースへの格納（Gem/NotebookLM等）
2. 📝 開発支援ツールの構築

**目的**: 開発効率の向上

## 価値提案の整理

### 1. 開発効率の向上
- **SQL→YQL変換**: 既存SQL資産の移行が容易
- **スキーマ定義駆動生成**: 新規YQL生成が容易
- **AI知識ベース**: 開発支援が充実

### 2. データベース抽象化
- **YQL→SQL変換**: 複数のDB方言を統一インターフェースで操作
- **方言の違いを抽象化**: PostgreSQL、MySQL、SQL Server等を統一的に扱える

### 3. AI解析の精度向上
- **構造化された形式**: YQLは構造化されているため、AIの理解が容易
- **スキーマ情報の付与**: 型情報、制約、リレーションシップを参照可能
- **処理効率の向上**: 関連付け処理が不要、トークン使用量の削減

### 4. 可読性と保守性
- **実行可能ドキュメント**: コード自体が仕様書として機能
- **一貫性**: エイリアス必須、各句が明確に分離
- **構造化**: YAML形式で階層的に整理

## まとめ

### YQLの利用用途
1. **クエリ言語として**: SQL→YQL変換、スキーマ定義駆動生成、YQL→SQL変換
2. **AI解析の前処理として**: SQL→YQL変換、スキーマ情報付与YQL
3. **ドキュメントとして**: 実行可能ドキュメント、AI知識ベース

### 価値提案
1. **開発効率の向上**: 既存SQL移行、新規YQL生成、開発支援
2. **データベース抽象化**: 複数のDB方言を統一インターフェースで操作
3. **AI解析の精度向上**: 構造化、スキーマ情報、処理効率
4. **可読性と保守性**: 実行可能ドキュメント、一貫性、構造化

### 実装の優先順位
1. **Phase 1**: 基本機能（クエリ言語としてのYQL）
2. **Phase 2**: AI解析支援
3. **Phase 3**: 知識ベース統合

用途が広がっていることは、**YQLの価値が多面的である**ことを示しています。各用途は相互に補完し合い、総合的な価値を提供します。

